MIME-Version: 1.0
Received: by 10.140.19.140 with HTTP; Sun, 11 Dec 2016 23:47:21 -0800 (PST)
In-Reply-To: <CAJF3soq5aX-RDWWuVTrJVhQKKZ=UxHRCH3nRZ8eROZexRUydYw@mail.gmail.com>
References: <CAJF3soq5aX-RDWWuVTrJVhQKKZ=UxHRCH3nRZ8eROZexRUydYw@mail.gmail.com>
Date: Mon, 12 Dec 2016 13:17:21 +0530
Delivered-To: digvijay@unicommerce.com
Message-ID: <CAJF3sopJLwhfOSu0yu=Urqsixf+Gsch+1V7kYjMu7ks0SxPayw@mail.gmail.com>
Subject: Re: New FKRecon_Detail_script
From: Digvijay Sharma <digvijay@unicommerce.com>
To: Akshay Agarwal <akshay.agarwal@unicommerce.com>
Content-Type: multipart/alternative; boundary=001a11c132ae58fbb605437150ed

--001a11c132ae58fbb605437150ed
Content-Type: text/plain; charset=UTF-8

Ek bari check krke btao. Maine refactor krdi h marketplaceFee ko include
krke.


On Mon, Dec 12, 2016 at 1:16 PM, Digvijay Sharma <digvijay@unicommerce.com>
wrote:

> <scraper name="flipkartReconciliationInvoiceDetailScript" xmlns:xsi="
> http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="
> http://www.unicommerce.com/schema/scraper-1.0.xsd" cachehttpclient="true"
> httpClientName="#{#channel.name}-seller-panel">
>
>     <var name="params" value="#{new java.util.HashMap()}"/>
>     <invoke method="doFlipkartLogin" script="flipkartUtils">
>         <param name="username" value="#{#username}"/>
>         <param name="password" value="#{#password}"/>
>         <param name="channel" value="#{#channel}"/>
>         <param name="params" value="#{#params}"/>
>     </invoke>
>
>     <var name="statusMap" value="#{new java.util.HashMap()}"/>
>     <http method="get" url="https://seller.flipkart.
> com/dashboard/statements" var="homePageResponse" fetchCookies="true" />
>     <var name="sellerId" value="#{#homePageResponseCookies.get('sellerId')}"
> />
>
>     <var name="utrNumber" value="#{#channelReconciliationElement.text()}"
> />
>     <startTag name="CreateChannelReconciliationInvoiceRequest">
>         <attribute name="xmlns" value="http://uniware.
> unicommerce.com/services/" />
>     </startTag>
>     <var name="paymentDate" value="#{T(com.unifier.core.
> utils.DateUtils).stringToDate(#channelReconciliationDetail.
> get('payment_date').getAsString(),'MMM dd, yyyy')}" />
>     <startTag name="ChannelReconciliationInvoice" />
>     <valueTag name="InvoiceCode" value="#{#utrNumber}" />
>     <var name="downloadLink" value="https://seller.flipkart.com/
> exportSettledData/exportData"/>
>     <log level="info" value="downloadLink: #{#downloadLink}"/>
>     <try>
>         <var name="path" value="/reconciliationInvoices/#{T(
> com.unifier.core.utils.EncryptionUtils).md5Encode(T(
> com.unifier.core.utils.DateUtils).getCurrentTime().getTime()+ '_' +
> T(com.uniware.core.utils.UserContext).current().tenant.code + '_' +
> #utrNumber + '_' + 'flipkartReconciliation')}.csv" />
>         <var name="filePath" value="#{T(com.unifier.core.
> cache.CacheManager).getInstance().getCache('environmentCache').exportDirectoryPath}#{#path}"
> />
>         <log level="info" value="filePath: #{#filePath}"/>
>         <http method="get" url="#{#downloadLink}"
> downloadToFile="#{#filePath}">
>             <param name="sellerId" value="#{#sellerId}"/>
>             <param name="utr_number" value="#{#utrNumber}"/>
>         </http>
>         <catch>
>             <log level="info" value="Unable to download File!"/>
>         </catch>
>     </try>
>     <valueTag name="DownloadUrl" value="#{#path}"/>
>     <valueTag name="ChannelCode" value="#{#channel.code}" />
>     <valueTag name="SettlementDate" value="#{T(com.unifier.core.
> utils.DateUtils).dateToString(#paymentDate,'dd/MM/yyyy')}" />
>     <valueTag name="DepositDate" value="#{T(com.unifier.core.
> utils.DateUtils).dateToString(#paymentDate,'dd/MM/yyyy')}" />
>     <valueTag name="TotalSettlementValue" value="#{#
> channelReconciliationDetail.get('transfer_amount').getAsString()}" />
>
>     <var name="hasNextPage" value="#{true}"/>
>     <var name="pageNumber" value="#{0}" />
>     <var name="end_date" value="#{T(com.unifier.core.
> utils.DateUtils).dateToString(T(com.unifier.core.utils.DateUtils).getCurrentDate(),
> &quot;yyyy-MM-dd&quot;)}" />
>     <var name="start_date" value="#{T(com.unifier.core.
> utils.DateUtils).dateToString(T(com.unifier.core.utils.
> DateUtils).addToDate(T(com.unifier.core.utils.DateUtils).getCurrentDate(),
> T(java.util.Calendar).DATE, -7), &quot;yyyy-MM-dd&quot;)}"/>
>     <startTag name="InvoiceItems" />
>     <while condition="#{#hasNextPage}">
>         <var name="hasNextPage" value="#{false}"/>
>         <var name="pageNumber" value="#{#pageNumber+1}" />
>         <http method="get" url="https://seller.flipkart.
> com/seller/#{#sellerId}/transactions/settled" var="transactionResponse"
> timeout="50">
>             <param name="utr_number" value="#{#utrNumber}"/>
>             <param name="sellerId" value="#{#sellerId}"/>
>             <param name="page_no" value="#{#pageNumber}" />
>             <param name="page_size" value="10" />
>         </http>
>         <log level="info" value="#{#pageNumber}"/>
>         <var name="transactionJson" value="#{T(com.unifier.core.
> utils.JsonUtils).stringToJson(#transactionResponse)}" />
>         <log level="info" value="#{#transactionJson}"/>
>         <if condition="#{!#transactionJson.get('data').
> get('total_count').isJsonNull()}">
>             <var name="hasNextPage" value="#{true}"/>
>             <else>
>                 <break/>
>             </else>
>         </if>
>         <var name="transactionIterator" value="#{#transactionJson.get(
> 'data').get('data').getAsJsonArray().iterator()}" />
>
>         <while condition="#{#transactionIterator.hasNext()}">
>
>             <var name="order" value="#{#transactionIterator.next()}" />
>             <var name="shippingFee" value="#{new
> java.math.BigDecimal(#order.get('shippingFee').getAsString())}" />
>             <var name="totalFixedFee" value="#{new
> java.math.BigDecimal(#order.get('fixedFee').getAsString())}" />
>             <var name="totalCommission" value="#{new
> java.math.BigDecimal(#order.get('marketPlaceFee').getAsString())}" />
>             <var name="finalTotalCommision" value="#{#totalCommission.
> subtract(#totalFixedFee).subtract(#shippingFee)}"/>
>             <var name="reverseShippingFee" value="#{new
> java.math.BigDecimal(#order.get('reverseShippingFee').getAsString())}" />
>             <var name="serviceTax" value="#{new
> java.math.BigDecimal(#order.get('serviceTax').getAsString())}" />
>             <var name="sbCessTax" value="#{new java.math.BigDecimal(#order.
> get('sbCessTax').getAsString())}" />
>             <var name="kkCessTax" value="#{new java.math.BigDecimal(#order.
> get('kkCessTax').getAsString())}" />
>             <var name="orderDate" value=""/>
>             <if condition="#{#order.get('orderDate') != null and
> !#order.get('orderDate').isJsonNull()}">
>                 <var name="orderDate" value="#{T(com.unifier.core.
> utils.DateUtils).dateToString(T(com.unifier.core.utils.
> DateUtils).stringToDate(#order.get('orderDate').getAsString(),'MMM dd,
> yyyy'),'dd/MM/yyyy')}" />
>             </if>
>             <var name="settledValue" value="#{new
> java.math.BigDecimal(#order.get('settlementValue').getAsString())}" />
>             <var name="channelRecovery" value="#{new
> java.math.BigDecimal(#order.get('marketPlaceFee').getAsString())}" />
>             <var name="channelRecoveryWithTax"
> value="#{#channelRecovery.add(#serviceTax).add(#kkCessTax).add(#sbCessTax)}"
> />
>             <if condition="#{#settledValue &gt; 0}">
>                 <var name="status" value="CREDIT_INITIATE" />
>                 <else>
>                     <var name="status" value="DEBIT_INITIATE" />
>                 </else>
>             </if>
>             <var name="feeDiscount" value="#{new
> java.math.BigDecimal(0.00)}" />
>             <var name="orderItemValue" value="#{new
> java.math.BigDecimal(0.00)}" />
>             <var name="performanceReward" value="#{new
> java.math.BigDecimal(0.00)}" />
>             <var name="protectionFund" value="#{new
> java.math.BigDecimal(0.00)}" />
>             <var name="refund" value="#{new java.math.BigDecimal(0.00)}" />
>             <var name="invoiceAmount" value="#{new
> java.math.BigDecimal(0.00)}" />
>             <var name="totalSellerEarning" value="#{new
> java.math.BigDecimal(0.00)}" />
>             <if condition="#{#order.get('invoiceAmount') != null and
> !#order.get('invoiceAmount').isJsonNull()}">
>                 <var name="invoiceAmount" value="#{new
> java.math.BigDecimal(#order.get('invoiceAmount').getAsString())}" />
>             </if>
>             <if condition="#{#order.get('feeDiscount') != null and
> !#order.get('feeDiscount').isJsonNull()}">
>                 <var name="feeDiscount" value="#{new
> java.math.BigDecimal(#order.get('feeDiscount').getAsString())}" />
>             </if>
>             <if condition="#{#order.get('sale') != null and
> !#order.get('sale').isJsonNull()}">
>                 <var name="orderItemValue" value="#{new
> java.math.BigDecimal(#order.get('sale').getAsString())}" />
>             </if>
>             <if condition="#{#order.get('performanceReward') != null and
> !#order.get('performanceReward').isJsonNull()}">
>                 <var name="performanceReward" value="#{new
> java.math.BigDecimal(#order.get('performanceReward').getAsString())}" />
>             </if>
>             <if condition="#{#order.get('protectionFund') != null and
> !#order.get('protectionFund').isJsonNull()}">
>                 <var name="protectionFund" value="#{new
> java.math.BigDecimal(#order.get('protectionFund').getAsString())}" />
>             </if>
>             <if condition="#{#order.get('refund') != null and
> !#order.get('refund').isJsonNull()}">
>                 <var name="refund" value="#{new
> java.math.BigDecimal(#order.get('refund').getAsString())}" />
>             </if>
>             <if condition="#{#order.get('fsn') != null and
> !#order.get('fsn').isJsonNull()}">
>                 <var name="channelProductName" value="#{#order.get('fsn').getAsString()}"
> />
>                 <else>
>                     <if condition="#{#order.get('description') != null
> and !#order.get('description').isJsonNull()}">
>                         <var name="channelProductName"
> value="#{#order.get('description').getAsString()}" cdata="true" />
>                     </if>
>                 </else>
>             </if>
>             <var name="shippingCharge" value="#{#invoiceAmount.subtract(#orderItemValue)}"
> />
>             <var name="totalTax" value="#{#serviceTax.add(#
> kkCessTax).add(#sbCessTax)}"/>
>             <var name="totalSellerEarning" value="#{#orderItemValue.add(#
> performanceReward).add(#feeDiscount).add(#protectionFund).add(#refund)}"
> />
>             <if condition="#{#order.get('finalStatus') != null and
> !#order.get('finalStatus').isJsonNull()}">
>                 <var name="finalStatus" value="#{#order.get('
> finalStatus').getAsString()}"/>
>                 <else>
>                     <var name="finalStatus" value="MarketPlace Fee"/>
>                 </else>
>             </if>
>             <if condition="#{#order.get('orderFullfilmentType') != null
> and !#order.get('orderFullfilmentType').isJsonNull()}">
>                 <var name="orderFullfilmentType" value="#{#order.get('
> orderFullfilmentType').getAsString()}"/>
>                 <else>
>                     <var name="orderFullfilmentType" value=""/>
>                 </else>
>             </if>
>             <if condition="#{!#order.get('orderFullfilmentType').equals('FA')
> or T(com.unifier.core.utils.StringUtils)
>                                     .isBlank(#order.get('
> orderFullfilmentType'))}">
>                 <!-- If MarketPlace Fee Order -->
>                 <if condition="#{T(com.unifier.core.utils.StringUtils)
>                                     .isBlank(#order.get('
> orderFullfilmentType'))}">
>                     <var name="settledValue" value="#{0}"/>
>                     <if condition="#{#protectionFund &gt; 0}">
>                         <var name="protectionFund" value="#{new
> java.math.BigDecimal(0.00).subtract(#protectionFund)}"/>
>                     </if>
>
>                     <if condition="#{#channelRecovery &gt; 0}">
>                         <var name="channelRecovery" value="#{new
> java.math.BigDecimal(0.00).subtract(#channelRecovery)}"/>
>                     </if>
>                     <var name="channelRecoveryWithTax"
> value="#{#protectionFund.add(#channelRecovery)}"/>
>                     <var name="totalTax" value="#{0}"/>
>                 </if>
>
>                 <startTag name="InvoiceItem" />
>                 <valueTag name="ReconciliationIdentifier"
> value="#{#order.get('orderItemId').getAsString()}"/>
>                 <valueTag name="ChannelSaleOrderCode"
> value="#{#order.get('orderId').getAsString()}" />
>                 <valueTag name="OrderDate" value="#{#orderDate}" />
>                 <valueTag name="InvoiceItemOrderStatus"
> value="#{#finalStatus}" />
>                 <valueTag name="OrderItemValue"
> value="#{#order.get('sale').getAsString()}" />
>                 <valueTag name="TotalDiscounts" value="#{#feeDiscount}" />
>                 <valueTag name="TotalRewards"
> value="#{#performanceReward}" />
>                 <valueTag name="TotalOtherIncentive"
> value="#{#protectionFund.add(#refund)}" />
>                 <valueTag name="TotalSellerEarning"
> value="#{#totalSellerEarning}" />
>                 <valueTag name="SettledValue" value="#{#settledValue}" />
>                 <valueTag name="ChannelProductName"
> value="#{#channelProductName}" />
>                 <valueTag name="IsProcessed" value="#{false}" />
>                 <valueTag name="Quantity" value="#{#order.get('quantity').getAsString()}"
> />
>                 <valueTag name="TotalCommission"
> value="#{#finalTotalCommision}" />
>                 <valueTag name="TotalFixedFee" value="#{#totalFixedFee}" />
>                 <valueTag name="TotalShippingFee" value="#{#shippingFee}"
> />
>                 <valueTag name="TotalShippingCharge"
> value="#{#shippingCharge}" />
>                 <valueTag name="TotalReverseShippingFee"
> value="#{#reverseShippingFee}" />
>                 <valueTag name="TotalAdditionalFee" value="#{new
> java.math.BigDecimal(0.00)}" />
>                 <valueTag name="TotalTax" value="#{#totalTax}" />
>                 <valueTag name="TotalChannelRecovery" value="#{#channelRecoveryWithTax}"
> />
>                 <valueTag name="AdditionalFeeDescription" value="" />
>                 <endTag name="InvoiceItem" />
>                 <else>
>                     <log level="info" value="Non-FA Order!"/>
>                 </else>
>             </if>
>         </while>
>     </while>
>     <endTag name="InvoiceItems" />
>     <endTag name="ChannelReconciliationInvoice" />
>     <endTag name="CreateChannelReconciliationInvoiceRequest" />
> </scraper>
>

--001a11c132ae58fbb605437150ed
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Ek bari check krke btao. Maine refactor krdi h marketplace=
Fee ko include krke.<div><br></div></div><div class=3D"gmail_extra"><br><di=
v class=3D"gmail_quote">On Mon, Dec 12, 2016 at 1:16 PM, Digvijay Sharma <s=
pan dir=3D"ltr">&lt;<a href=3D"mailto:digvijay@unicommerce.com" target=3D"_=
blank">digvijay@unicommerce.com</a>&gt;</span> wrote:<br><blockquote class=
=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padd=
ing-left:1ex"><div dir=3D"ltr"><div>&lt;scraper name=3D&quot;<wbr>flipkartR=
econciliationInvoiceD<wbr>etailScript&quot; xmlns:xsi=3D&quot;<a href=3D"ht=
tp://www.w3.org/2001/XMLSchema-instance" target=3D"_blank">http://www.w3.or=
g/<wbr>2001/XMLSchema-instance</a>&quot; xsi:noNamespaceSchemaLocation=3D<w=
br>&quot;<a href=3D"http://www.unicommerce.com/schema/scraper-1.0.xsd" targ=
et=3D"_blank">http://www.unicommerce.com/<wbr>schema/scraper-1.0.xsd</a>&qu=
ot; cachehttpclient=3D&quot;true&quot; httpClientName=3D&quot;#{#<a href=3D=
"http://channel.name" target=3D"_blank">channel.<wbr>name</a>}-seller-panel=
&quot;&gt;</div><div><br></div><div>=C2=A0 =C2=A0 &lt;var name=3D&quot;para=
ms&quot; value=3D&quot;#{new java.util.HashMap()}&quot;/&gt;</div><div>=C2=
=A0 =C2=A0 &lt;invoke method=3D&quot;doFlipkartLogin&quot; script=3D&quot;f=
lipkartUtils&quot;&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;param name=
=3D&quot;username&quot; value=3D&quot;#{#username}&quot;/&gt;</div><div>=C2=
=A0 =C2=A0 =C2=A0 =C2=A0 &lt;param name=3D&quot;password&quot; value=3D&quo=
t;#{#password}&quot;/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;param n=
ame=3D&quot;channel&quot; value=3D&quot;#{#channel}&quot;/&gt;</div><div>=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;param name=3D&quot;params&quot; value=3D&qu=
ot;#{#params}&quot;/&gt;</div><div>=C2=A0 =C2=A0 &lt;/invoke&gt;</div><div>=
<br></div><div>=C2=A0 =C2=A0 &lt;var name=3D&quot;statusMap&quot; value=3D&=
quot;#{new java.util.HashMap()}&quot;/&gt;</div><div>=C2=A0 =C2=A0 &lt;http=
 method=3D&quot;get&quot; url=3D&quot;<a href=3D"https://seller.flipkart.co=
m/dashboard/statements" target=3D"_blank">https://seller.flipkart.<wbr>com/=
dashboard/statements</a>&quot; var=3D&quot;homePageResponse&quot; fetchCook=
ies=3D&quot;true&quot; /&gt;</div><div>=C2=A0 =C2=A0 &lt;var name=3D&quot;s=
ellerId&quot; value=3D&quot;#{#<wbr>homePageResponseCookies.get(&#39;<wbr>s=
ellerId&#39;)}&quot; /&gt;</div><div><br></div><div>=C2=A0 =C2=A0 &lt;var n=
ame=3D&quot;utrNumber&quot; value=3D&quot;#{#<wbr>channelReconciliationElem=
ent.<wbr>text()}&quot; /&gt;</div><div>=C2=A0 =C2=A0 &lt;startTag name=3D&q=
uot;<wbr>CreateChannelReconciliationInv<wbr>oiceRequest&quot;&gt;</div><div=
>=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;attribute name=3D&quot;xmlns&quot; value=
=3D&quot;<a href=3D"http://uniware.unicommerce.com/services/" target=3D"_bl=
ank">http://uniware.<wbr>unicommerce.com/services/</a>&quot; /&gt;</div><di=
v>=C2=A0 =C2=A0 &lt;/startTag&gt;</div><div>=C2=A0 =C2=A0 &lt;var name=3D&q=
uot;paymentDate&quot; value=3D&quot;#{T(com.unifier.core.<wbr>utils.DateUti=
ls).stringToDate(<wbr>#channelReconciliationDetail.<wbr>get(&#39;payment_da=
te&#39;).<wbr>getAsString(),&#39;MMM dd, yyyy&#39;)}&quot; /&gt;</div><div>=
=C2=A0 =C2=A0 &lt;startTag name=3D&quot;<wbr>ChannelReconciliationInvoice&q=
uot; /&gt;</div><div>=C2=A0 =C2=A0 &lt;valueTag name=3D&quot;InvoiceCode&qu=
ot; value=3D&quot;#{#utrNumber}&quot; /&gt;</div><div>=C2=A0 =C2=A0 &lt;var=
 name=3D&quot;downloadLink&quot; value=3D&quot;<a href=3D"https://seller.fl=
ipkart.com/exportSettledData/exportData" target=3D"_blank">https://seller.<=
wbr>flipkart.com/<wbr>exportSettledData/exportData</a>&quot;/<wbr>&gt;</div=
><div>=C2=A0 =C2=A0 &lt;log level=3D&quot;info&quot; value=3D&quot;download=
Link: #{#downloadLink}&quot;/&gt;</div><div>=C2=A0 =C2=A0 &lt;try&gt;</div>=
<div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;path&quot; value=3D&q=
uot;/<wbr>reconciliationInvoices/#{T(<wbr>com.unifier.core.utils.<wbr>Encry=
ptionUtils).md5Encode(T(<wbr>com.unifier.core.utils.<wbr>DateUtils).getCurr=
entTime().<wbr>getTime()+ &#39;_&#39; + T(com.uniware.core.utils.<wbr>UserC=
ontext).current().tenant.<wbr>code + &#39;_&#39; + #utrNumber + &#39;_&#39;=
 + &#39;flipkartReconciliation&#39;)}.<wbr>csv&quot; /&gt;</div><div>=C2=A0=
 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;filePath&quot; value=3D&quot;#{T=
(com.unifier.core.<wbr>cache.CacheManager).<wbr>getInstance().getCache(&#39=
;<wbr>environmentCache&#39;).<wbr>exportDirectoryPath}#{#path}&quot; /&gt;<=
/div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;log level=3D&quot;info&quot; valu=
e=3D&quot;filePath: #{#filePath}&quot;/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 &lt;http method=3D&quot;get&quot; url=3D&quot;#{#downloadLink}&quot;=
 downloadToFile=3D&quot;#{#filePath}&quot;&gt;</div><div>=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 &lt;param name=3D&quot;sellerId&quot; value=3D&quo=
t;#{#sellerId}&quot;/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 &lt;param name=3D&quot;utr_number&quot; value=3D&quot;#{#utrNumber}&quo=
t;/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/http&gt;</div><div>=C2=
=A0 =C2=A0 =C2=A0 =C2=A0 &lt;catch&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 &lt;log level=3D&quot;info&quot; value=3D&quot;Unable to =
download File!&quot;/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/catch&=
gt;</div><div>=C2=A0 =C2=A0 &lt;/try&gt;</div><div>=C2=A0 =C2=A0 &lt;valueT=
ag name=3D&quot;DownloadUrl&quot; value=3D&quot;#{#path}&quot;/&gt;</div><d=
iv>=C2=A0 =C2=A0 &lt;valueTag name=3D&quot;ChannelCode&quot; value=3D&quot;=
#{#channel.code}&quot; /&gt;</div><div>=C2=A0 =C2=A0 &lt;valueTag name=3D&q=
uot;SettlementDate&quot; value=3D&quot;#{T(com.unifier.core.<wbr>utils.Date=
Utils).dateToString(<wbr>#paymentDate,&#39;dd/MM/yyyy&#39;)}&quot; /&gt;</d=
iv><div>=C2=A0 =C2=A0 &lt;valueTag name=3D&quot;DepositDate&quot; value=3D&=
quot;#{T(com.unifier.core.<wbr>utils.DateUtils).dateToString(<wbr>#paymentD=
ate,&#39;dd/MM/yyyy&#39;)}&quot; /&gt;</div><div>=C2=A0 =C2=A0 &lt;valueTag=
 name=3D&quot;TotalSettlementValue&quot; value=3D&quot;#{#<wbr>channelRecon=
ciliationDetail.<wbr>get(&#39;transfer_amount&#39;).<wbr>getAsString()}&quo=
t; /&gt;</div><div><br></div><div>=C2=A0 =C2=A0 &lt;var name=3D&quot;hasNex=
tPage&quot; value=3D&quot;#{true}&quot;/&gt;</div><div>=C2=A0 =C2=A0 &lt;va=
r name=3D&quot;pageNumber&quot; value=3D&quot;#{0}&quot; /&gt;</div><div>=
=C2=A0 =C2=A0 &lt;var name=3D&quot;end_date&quot; value=3D&quot;#{T(com.uni=
fier.core.<wbr>utils.DateUtils).dateToString(<wbr>T(com.unifier.core.utils.=
<wbr>DateUtils).getCurrentDate(), &amp;quot;yyyy-MM-dd&amp;quot;)}&quot; /&=
gt;</div><div>=C2=A0 =C2=A0 &lt;var name=3D&quot;start_date&quot; value=3D&=
quot;#{T(com.unifier.core.<wbr>utils.DateUtils).dateToString(<wbr>T(com.uni=
fier.core.utils.<wbr>DateUtils).addToDate(T(com.<wbr>unifier.core.utils.Dat=
eUtils).<wbr>getCurrentDate(), T(java.util.Calendar).DATE, -7), &amp;quot;y=
yyy-MM-dd&amp;quot;)}&quot;/&gt;</div><div>=C2=A0 =C2=A0 &lt;startTag name=
=3D&quot;InvoiceItems&quot; /&gt;</div><div>=C2=A0 =C2=A0 &lt;while conditi=
on=3D&quot;#{#hasNextPage}&quot;&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =
&lt;var name=3D&quot;hasNextPage&quot; value=3D&quot;#{false}&quot;/&gt;</d=
iv><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;pageNumber&quot; v=
alue=3D&quot;#{#pageNumber+1}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 &lt;http method=3D&quot;get&quot; url=3D&quot;<a href=3D"https://sel=
ler.flipkart.com/seller/#%7B%23sellerId%7D/transactions/settled" target=3D"=
_blank">https://seller.flipkart.<wbr>com/seller/#{#sellerId}/<wbr>transacti=
ons/settled</a>&quot; var=3D&quot;transactionResponse&quot; timeout=3D&quot=
;50&quot;&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;param=
 name=3D&quot;utr_number&quot; value=3D&quot;#{#utrNumber}&quot;/&gt;</div>=
<div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;param name=3D&quot;selle=
rId&quot; value=3D&quot;#{#sellerId}&quot;/&gt;</div><div>=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 &lt;param name=3D&quot;page_no&quot; value=3D&quot=
;#{#pageNumber}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 &lt;param name=3D&quot;page_size&quot; value=3D&quot;10&quot; /&gt;<=
/div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/http&gt;</div><div>=C2=A0 =C2=A0=
 =C2=A0 =C2=A0 &lt;log level=3D&quot;info&quot; value=3D&quot;#{#pageNumber=
}&quot;/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;tra=
nsactionJson&quot; value=3D&quot;#{T(com.unifier.core.<wbr>utils.JsonUtils)=
.stringToJson(<wbr>#transactionResponse)}&quot; /&gt;</div><div>=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 &lt;log level=3D&quot;info&quot; value=3D&quot;#{#transac=
tionJson}&quot;/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;if condition=
=3D&quot;#{!#<wbr>transactionJson.get(&#39;data&#39;).<wbr>get(&#39;total_c=
ount&#39;).isJsonNull(<wbr>)}&quot;&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;hasNextPage&quot; value=3D&quot;#{tr=
ue}&quot;/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;else=
&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;=
break/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/else&gt=
;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/if&gt;</div><div>=C2=A0 =C2=A0=
 =C2=A0 =C2=A0 &lt;var name=3D&quot;transactionIterator&quot; value=3D&quot=
;#{#transactionJson.get(<wbr>&#39;data&#39;).get(&#39;data&#39;).<wbr>getAs=
JsonArray().iterator()}&quot; /&gt;</div><div><br></div><div>=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 &lt;while condition=3D&quot;#{#<wbr>transactionIterator.hasNe=
xt()}<wbr>&quot;&gt;</div><div><br></div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 &lt;var name=3D&quot;order&quot; value=3D&quot;#{#transaction=
Iterator.<wbr>next()}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 &lt;var name=3D&quot;shippingFee&quot; value=3D&quot;#{new java.=
math.BigDecimal(#order.<wbr>get(&#39;shippingFee&#39;).<wbr>getAsString())}=
&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var na=
me=3D&quot;totalFixedFee&quot; value=3D&quot;#{new java.math.BigDecimal(#or=
der.<wbr>get(&#39;fixedFee&#39;).getAsString())<wbr>}&quot; /&gt;</div><div=
>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;totalCommis=
sion&quot; value=3D&quot;#{new java.math.BigDecimal(#order.<wbr>get(&#39;ma=
rketPlaceFee&#39;).<wbr>getAsString())}&quot; /&gt;</div><div>=C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;finalTotalCommision&quot;=
 value=3D&quot;#{#totalCommission.<wbr>subtract(#totalFixedFee).<wbr>subtra=
ct(#shippingFee)}&quot;/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 &lt;var name=3D&quot;reverseShippingFee&quot; value=3D&quot;#{new ja=
va.math.BigDecimal(#order.<wbr>get(&#39;reverseShippingFee&#39;).<wbr>getAs=
String())}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
&lt;var name=3D&quot;serviceTax&quot; value=3D&quot;#{new java.math.BigDeci=
mal(#order.<wbr>get(&#39;serviceTax&#39;).getAsString(<wbr>))}&quot; /&gt;<=
/div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;sb=
CessTax&quot; value=3D&quot;#{new java.math.BigDecimal(#order.<wbr>get(&#39=
;sbCessTax&#39;).getAsString()<wbr>)}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;kkCessTax&quot; value=3D&q=
uot;#{new java.math.BigDecimal(#order.<wbr>get(&#39;kkCessTax&#39;).getAsSt=
ring()<wbr>)}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 &lt;var name=3D&quot;orderDate&quot; value=3D&quot;&quot;/&gt;</div><di=
v>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;if condition=3D&quot;#{#ord=
er.get(&#39;<wbr>orderDate&#39;) !=3D null and !#order.get(&#39;orderDate&#=
39;).<wbr>isJsonNull()}&quot;&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;orderDate&quot; value=3D&quot=
;#{T(com.unifier.core.<wbr>utils.DateUtils).dateToString(<wbr>T(com.unifier=
.core.utils.<wbr>DateUtils).stringToDate(#<wbr>order.get(&#39;orderDate&#39=
;).<wbr>getAsString(),&#39;MMM dd, yyyy&#39;),&#39;dd/MM/yyyy&#39;)}&quot; =
/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/if&gt;</div>=
<div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;settled=
Value&quot; value=3D&quot;#{new java.math.BigDecimal(#order.<wbr>get(&#39;s=
ettlementValue&#39;).<wbr>getAsString())}&quot; /&gt;</div><div>=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;channelRecovery&quot; =
value=3D&quot;#{new java.math.BigDecimal(#order.<wbr>get(&#39;marketPlaceFe=
e&#39;).<wbr>getAsString())}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;channelRecoveryWithTax&quot; value=
=3D&quot;#{#channelRecovery.add(<wbr>#serviceTax).add(#kkCessTax).<wbr>add(=
#sbCessTax)}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 &lt;if condition=3D&quot;#{#settledValue &amp;gt; 0}&quot;&gt;</div><di=
v>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&q=
uot;status&quot; value=3D&quot;CREDIT_INITIATE&quot; /&gt;</div><div>=C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;else&gt;</div><div>=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;v=
ar name=3D&quot;status&quot; value=3D&quot;DEBIT_INITIATE&quot; /&gt;</div>=
<div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/else&gt;<=
/div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/if&gt;</div><div>=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;feeDiscount&=
quot; value=3D&quot;#{new java.math.BigDecimal(0.00)}&quot; /&gt;</div><div=
>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;orderItemVa=
lue&quot; value=3D&quot;#{new java.math.BigDecimal(0.00)}&quot; /&gt;</div>=
<div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;perform=
anceReward&quot; value=3D&quot;#{new java.math.BigDecimal(0.00)}&quot; /&gt=
;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;=
protectionFund&quot; value=3D&quot;#{new java.math.BigDecimal(0.00)}&quot; =
/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&q=
uot;refund&quot; value=3D&quot;#{new java.math.BigDecimal(0.00)}&quot; /&gt=
;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;=
invoiceAmount&quot; value=3D&quot;#{new java.math.BigDecimal(0.00)}&quot; /=
&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&qu=
ot;totalSellerEarning&quot; value=3D&quot;#{new java.math.BigDecimal(0.00)}=
&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;if con=
dition=3D&quot;#{#order.get(&#39;<wbr>invoiceAmount&#39;) !=3D null and !#o=
rder.get(&#39;invoiceAmount&#39;).<wbr>isJsonNull()}&quot;&gt;</div><div>=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quo=
t;invoiceAmount&quot; value=3D&quot;#{new java.math.BigDecimal(#order.<wbr>=
get(&#39;invoiceAmount&#39;).<wbr>getAsString())}&quot; /&gt;</div><div>=C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/if&gt;</div><div>=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;if condition=3D&quot;#{#order.get(&#39;<wbr=
>feeDiscount&#39;) !=3D null and !#order.get(&#39;feeDiscount&#39;).<wbr>is=
JsonNull()}&quot;&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 &lt;var name=3D&quot;feeDiscount&quot; value=3D&quot;#{new ja=
va.math.BigDecimal(#order.<wbr>get(&#39;feeDiscount&#39;).<wbr>getAsString(=
))}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/if=
&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;if condition=
=3D&quot;#{#order.get(&#39;sale&#39;<wbr>) !=3D null and !#order.get(&#39;s=
ale&#39;).<wbr>isJsonNull()}&quot;&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;orderItemValue&quot; v=
alue=3D&quot;#{new java.math.BigDecimal(#order.<wbr>get(&#39;sale&#39;).get=
AsString())}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 &lt;/if&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;if =
condition=3D&quot;#{#order.get(&#39;<wbr>performanceReward&#39;) !=3D null =
and !#order.get(&#39;<wbr>performanceReward&#39;).<wbr>isJsonNull()}&quot;&=
gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;v=
ar name=3D&quot;performanceReward&quot; value=3D&quot;#{new java.math.BigDe=
cimal(#order.<wbr>get(&#39;performanceReward&#39;).<wbr>getAsString())}&quo=
t; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/if&gt;</d=
iv><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;if condition=3D&quot;=
#{#order.get(&#39;<wbr>protectionFund&#39;) !=3D null and !#order.get(&#39;=
protectionFund&#39;).<wbr>isJsonNull()}&quot;&gt;</div><div>=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;protectionFu=
nd&quot; value=3D&quot;#{new java.math.BigDecimal(#order.<wbr>get(&#39;prot=
ectionFund&#39;).<wbr>getAsString())}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/if&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 &lt;if condition=3D&quot;#{#order.get(&#39;<wbr>refund&#3=
9;) !=3D null and !#order.get(&#39;refund&#39;).<wbr>isJsonNull()}&quot;&gt=
;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var=
 name=3D&quot;refund&quot; value=3D&quot;#{new java.math.BigDecimal(#order.=
<wbr>get(&#39;refund&#39;).getAsString())}&quot; /&gt;</div><div>=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/if&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 &lt;if condition=3D&quot;#{#order.get(&#39;fsn&#39;) !=
=3D null and !#order.get(&#39;fsn&#39;).isJsonNull(<wbr>)}&quot;&gt;</div><=
div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D=
&quot;channelProductName&quot; value=3D&quot;#{#order.get(&#39;fsn&#39;).<w=
br>getAsString()}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 &lt;else&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;if condition=3D&quot;#{#order.ge=
t(&#39;<wbr>description&#39;) !=3D null and !#order.get(&#39;description&#3=
9;).<wbr>isJsonNull()}&quot;&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;c=
hannelProductName&quot; value=3D&quot;#{#order.get(&#39;<wbr>description&#3=
9;).getAsString()}&quot; cdata=3D&quot;true&quot; /&gt;</div><div>=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/if&gt;<=
/div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/else=
&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/if&gt;</div><=
div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;shipping=
Charge&quot; value=3D&quot;#{#invoiceAmount.<wbr>subtract(#orderItemValue)}=
&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var na=
me=3D&quot;totalTax&quot; value=3D&quot;#{#serviceTax.add(#<wbr>kkCessTax).=
add(#sbCessTax)}&quot;/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 &lt;var name=3D&quot;totalSellerEarning&quot; value=3D&quot;#{#order=
ItemValue.add(#<wbr>performanceReward).add(#<wbr>feeDiscount).add(#<wbr>pro=
tectionFund).add(#refund)}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 &lt;if condition=3D&quot;#{#order.get(&#39;<wbr>finalStat=
us&#39;) !=3D null and !#order.get(&#39;finalStatus&#39;).<wbr>isJsonNull()=
}&quot;&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 &lt;var name=3D&quot;finalStatus&quot; value=3D&quot;#{#order.get(&#39;=
<wbr>finalStatus&#39;).getAsString()}&quot;/<wbr>&gt;</div><div>=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;else&gt;</div><div>=C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var nam=
e=3D&quot;finalStatus&quot; value=3D&quot;MarketPlace Fee&quot;/&gt;</div><=
div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/else&gt;</=
div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/if&gt;</div><div>=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;if condition=3D&quot;#{#order=
.get(&#39;<wbr>orderFullfilmentType&#39;) !=3D null and !#order.get(&#39;<w=
br>orderFullfilmentType&#39;).<wbr>isJsonNull()}&quot;&gt;</div><div>=C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;orde=
rFullfilmentType&quot; value=3D&quot;#{#order.get(&#39;<wbr>orderFullfilmen=
tType&#39;).<wbr>getAsString()}&quot;/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;else&gt;</div><div>=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;o=
rderFullfilmentType&quot; value=3D&quot;&quot;/&gt;</div><div>=C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/else&gt;</div><div>=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/if&gt;</div><div>=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 &lt;if condition=3D&quot;#{!#order.get(&#39;<wbr>o=
rderFullfilmentType&#39;).equals(<wbr>&#39;FA&#39;) or T(com.unifier.core.u=
tils.<wbr>StringUtils)</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 .isBlank(#order.get(&#39;<wbr>orderFullfilmentType&#39;))}&quot;=
&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;=
!-- If MarketPlace Fee Order --&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;if condition=3D&quot;#{T(com.unifier.<wbr>c=
ore.utils.StringUtils)</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 .isBlank(#order.get(&#39;<wbr>orderFullfilmentType&#39;))}&quot;=
&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 &lt;var name=3D&quot;settledValue&quot; value=3D&quot;#{0}&quot;=
/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 &lt;if condition=3D&quot;#{#protectionFund &amp;gt; 0}&quot;&gt;=
</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;protectionFund&quot; value=3D&quo=
t;#{new java.math.BigDecimal(0.00).<wbr>subtract(#protectionFund)}&quot;/&g=
t;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 &lt;/if&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0=C2=A0</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;if condition=3D&quot;#{#channelReco=
very &amp;gt; 0}&quot;&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;channelR=
ecovery&quot; value=3D&quot;#{new java.math.BigDecimal(0.00).<wbr>subtract(=
#channelRecovery)}&quot;/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/if&gt;</div><div>=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;c=
hannelRecoveryWithTax&quot; value=3D&quot;#{#protectionFund.add(#<wbr>chann=
elRecovery)}&quot;/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;var name=3D&quot;totalTax&quot; value=3D&q=
uot;#{0}&quot;/&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 &lt;/if&gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0</div><div>=
<br></div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;=
startTag name=3D&quot;InvoiceItem&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valueTag name=3D&quot;<wbr>Recon=
ciliationIdentifier&quot; value=3D&quot;#{#order.get(&#39;<wbr>orderItemId&=
#39;).getAsString()}&quot;/<wbr>&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valueTag name=3D&quot;ChannelSaleOrderCode&=
quot; value=3D&quot;#{#order.get(&#39;orderId&#39;)<wbr>.getAsString()}&quo=
t; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
&lt;valueTag name=3D&quot;OrderDate&quot; value=3D&quot;#{#orderDate}&quot;=
 /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &l=
t;valueTag name=3D&quot;InvoiceItemOrderStatus&quot; value=3D&quot;#{#final=
Status}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 &lt;valueTag name=3D&quot;OrderItemValue&quot; value=3D&quot;#{#=
order.get(&#39;sale&#39;).<wbr>getAsString()}&quot; /&gt;</div><div>=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valueTag name=3D&quot;=
TotalDiscounts&quot; value=3D&quot;#{#feeDiscount}&quot; /&gt;</div><div>=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valueTag name=
=3D&quot;TotalRewards&quot; value=3D&quot;#{#performanceReward}&quot; /&gt;=
</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valu=
eTag name=3D&quot;TotalOtherIncentive&quot; value=3D&quot;#{#protectionFund=
.add(#<wbr>refund)}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valueTag name=3D&quot;TotalSellerEarning&quot;=
 value=3D&quot;#{#totalSellerEarning}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valueTag name=3D&quot;Settled=
Value&quot; value=3D&quot;#{#settledValue}&quot; /&gt;</div><div>=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valueTag name=3D&quot;Cha=
nnelProductName&quot; value=3D&quot;#{#channelProductName}&quot; /&gt;</div=
><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valueTag =
name=3D&quot;IsProcessed&quot; value=3D&quot;#{false}&quot; /&gt;</div><div=
>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valueTag name=
=3D&quot;Quantity&quot; value=3D&quot;#{#order.get(&#39;quantity&#39;<wbr>)=
.getAsString()}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 &lt;valueTag name=3D&quot;TotalCommission&quot; value=
=3D&quot;#{#finalTotalCommision}<wbr>&quot; /&gt;</div><div>=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valueTag name=3D&quot;TotalFi=
xedFee&quot; value=3D&quot;#{#totalFixedFee}&quot; /&gt;</div><div>=C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valueTag name=3D&quot;=
TotalShippingFee&quot; value=3D&quot;#{#shippingFee}&quot; /&gt;</div><div>=
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valueTag name=
=3D&quot;TotalShippingCharge&quot; value=3D&quot;#{#shippingCharge}&quot; /=
&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;=
valueTag name=3D&quot;TotalReverseShippingFee&quot; value=3D&quot;#{#revers=
eShippingFee}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 &lt;valueTag name=3D&quot;TotalAdditionalFee&quot; value=
=3D&quot;#{new java.math.BigDecimal(0.00)}&quot; /&gt;</div><div>=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valueTag name=3D&quot;Tot=
alTax&quot; value=3D&quot;#{#totalTax}&quot; /&gt;</div><div>=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;valueTag name=3D&quot;TotalCh=
annelRecovery&quot; value=3D&quot;#{#<wbr>channelRecoveryWithTax}&quot; /&g=
t;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;va=
lueTag name=3D&quot;<wbr>AdditionalFeeDescription&quot; value=3D&quot;&quot=
; /&gt;</div><div>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &=
lt;endTag name=3D&quot;InvoiceItem&quot; /&gt;</div><div>=C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;else&gt;</div><div>=C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;log level=3D&q=
uot;info&quot; value=3D&quot;Non-FA Order!&quot;/&gt;</div><div>=C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/else&gt;</div><div>=C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 &lt;/if&gt;</div><div>=C2=A0 =C2=A0 =
=C2=A0 =C2=A0 &lt;/while&gt;</div><div>=C2=A0 =C2=A0 &lt;/while&gt;</div><d=
iv>=C2=A0 =C2=A0 &lt;endTag name=3D&quot;InvoiceItems&quot; /&gt;</div><div=
>=C2=A0 =C2=A0 &lt;endTag name=3D&quot;<wbr>ChannelReconciliationInvoice&qu=
ot; /&gt;</div><div>=C2=A0 =C2=A0 &lt;endTag name=3D&quot;<wbr>CreateChanne=
lReconciliationInv<wbr>oiceRequest&quot; /&gt;</div><div>&lt;/scraper&gt;</=
div></div>
</blockquote></div><br></div>

--001a11c132ae58fbb605437150ed--